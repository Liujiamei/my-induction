<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport"  content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <link rel="stylesheet" href="css/reset.min.css"/> <!--清默认样式，并设置默认样式-->
    <link rel="stylesheet" href="css/myIndex.css"/>
    <link rel="stylesheet" href="css/animate.css"/> <!--动画库-->
    <link rel="stylesheet" href="css/swiper.min.css"/> <!--轮播图等动画库-->
    <style>

    </style>
</head>
<body>
<section class="main">
    <div class="music"> <!--有一个音乐按钮-->
        <audio src="audio/beyond.mp3" loop preload="none" id="beyond">  <!--歌曲-->
            <!--
            loop:循环播放
            preload:none 不提前进行预加载
                    auto 提前进行预加载
            -->
        </audio>
    </div>
    <div class="swiper-container">
        <!--轮播图-->
        <div class="swiper-wrapper">
            <div class="swiper-slide slide1" >
                <img src="img/swiper/page1-text1.png" alt=""/>
                <img src="img/swiper/page1-text2.png" alt=""/>
                <img src="img/swiper/page1-text3.png" alt=""/>
                <img src="img/swiper/page1-text4.png" alt=""/>
            </div>
            <div class="swiper-slide slide2" >
                <img src="img/swiper/page2-text1.png" alt=""/>
                <img src="img/swiper/page2-text2.png" alt=""/>
                <img src="img/swiper/page2-text3.png" alt=""/>
                <img src="img/swiper/page2-text4.png" alt=""/>
            </div>
        </div>
    </div>
</section>
</body>
</html>
<script >
    /*移动适配*/
    var desW=640;
    var winW=document.documentElement.clientWidth;
    document.documentElement.style.fontSize=winW/desW*100+'px';
</script>
<script src="js/swiper.min.js"></script>
<script>
    /*不是循环模式的处理*/
/*    var mySwiper=new Swiper(".swiper-container",{
        direction:'vertical',
        onTransitionEnd:function(swiper){
//            console.log(swiper);
            var curIndex=swiper.activeIndex; //当前显示/活动的滑块的索引
            var slides=swiper.slides; //获得所有的滑块
            //找到当前显示的滑块，并给它加上相应的id名
            [].forEach.call(slides,function(item,index){
                item.id="";//把所有滑块的索引去掉
                if(index==curIndex){
                    item.id="page"+(curIndex+API);
                }
            })
        },
        onInit:function(swiper){
            //对第一个滑块初始化
            var slides=swiper.slides;
            slides[0].id="page1";
        }

    })*/
    /*循环模式*/
    var mySwiper=new Swiper(".swiper-container",{
    direction:'vertical',
    loop:true,
    onTransitionEnd:function(swiper){
        //把原来的第一个滑块复制了一份放在最后的位置，
        //把原来的最后一个滑块复制了一份放在第一个位置
        var slides=swiper.slides;
        var curIndex=swiper.activeIndex;
//        console.log(slides.length);//4
        var lastIndexSilde=slides.length-1; //现在的最后一个滑块
        var trueIndexSilde=slides.length-2; //原来的最后一个滑块
        [].forEach.call(slides,function(item,index){ //类数组转数组，并调用回调函数
            item.id="";
            if(curIndex===index){ //对当前显示的滑块做判断
                switch (index){
                    case 0:
                        item.id="page"+trueIndexSilde;
                        break;
                    case lastIndexSilde:
                        item.id="page1";
                        break;
                    default :
                        item.id="page"+curIndex;
                        break;
                }
            }
        })

    }
})
    /*播放音乐*/
    var music=document.querySelector('.music');
    var beyond=document.querySelector('#beyond');
    window.setTimeout(function(){
        //等1s后播放音乐，但必须等缓存后才会有声音，这时才让音乐按钮图片旋转
        //canplay用来检测是否有声音
        beyond.play();
        beyond.addEventListener("canplay",function(){
            music.className="music musicCur";
        },false);
    },1000);
    music.addEventListener("click",function(){
        //paused判断音频文件是播放还是停止,若为停止，则点击后播放音乐，并让音乐按钮图片旋转；若为播放，则点击后让音乐停止，并停止音乐按钮图片的旋转
        //播放音频：play() 让音频文件停止播放：pause()
        if(beyond.paused){
            beyond.play();
            music.className="music musicCur";
//            music.classList.add="musicCur";
        }else{
            beyond.pause();
//            music.classList.remove="musicCur";
            music.className="music";
            music.style.opacity=1;
        }
    });



</script>